<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1236px" preserveAspectRatio="none" style="width:1257px;height:1236px;" version="1.1" viewBox="0 0 1257 1236" width="1257px" zoomAndPan="magnify"><defs><filter height="300%" id="fa2f981eyb554" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="523.5" y="22.9951">card payment processing</text><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="664.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="190.8594"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="891.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="501" y="249.125"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="503.6016" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="737" y="351.6563"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="64.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="737" y="919.5234"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="737" y="1063.0547"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="393.0703" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="963" y="462.1875"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="424.3359" style="stroke: #000000; stroke-width: 2.0;" width="1173" x="62" y="423.9219"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="248.8672" style="stroke: #000000; stroke-width: 2.0;" width="1153" x="72" y="519.3203"/><rect fill="#FFFFFF" height="102.2031" style="stroke: none; stroke-width: 1.0;" width="1153" x="72" y="665.9844"/><rect fill="#FFFFFF" height="73.0703" style="stroke: none; stroke-width: 1.0;" width="1173" x="62" y="775.1875"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="140" x2="140" y1="116.5938" y2="1149.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="300" x2="300" y1="116.5938" y2="1149.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="505.5" x2="505.5" y1="116.5938" y2="1149.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="741.5" x2="741.5" y1="116.5938" y2="1149.3203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="967.5" x2="967.5" y1="116.5938" y2="1149.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="82" y="113.292">client_customer</text><ellipse cx="140" cy="43.2969" fill="#FFFF00" filter="url(#fa2f981eyb554)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M140,51.2969 L140,78.2969 M127,59.2969 L153,59.2969 M140,78.2969 L127,93.2969 M140,78.2969 L153,93.2969 " fill="none" filter="url(#fa2f981eyb554)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="82" y="1161.3154">client_customer</text><ellipse cx="140" cy="1174.6172" fill="#FFFF00" filter="url(#fa2f981eyb554)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M140,1182.6172 L140,1209.6172 M127,1190.6172 L153,1190.6172 M140,1209.6172 L127,1224.6172 M140,1209.6172 L153,1224.6172 " fill="none" filter="url(#fa2f981eyb554)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#99FF99" filter="url(#fa2f981eyb554)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="243" y="81.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="250" y="101.292">internet_shop</text><rect fill="#99FF99" filter="url(#fa2f981eyb554)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="243" y="1148.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="250" y="1168.3154">internet_shop</text><rect fill="#FF0000" filter="url(#fa2f981eyb554)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="448.5" y="81.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="455.5" y="101.292">bank_acquirer</text><rect fill="#FF0000" filter="url(#fa2f981eyb554)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="448.5" y="1148.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="455.5" y="1168.3154">bank_acquirer</text><rect fill="#FF00FF" filter="url(#fa2f981eyb554)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="674.5" y="81.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="681.5" y="101.292">payment_system</text><rect fill="#FF00FF" filter="url(#fa2f981eyb554)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="674.5" y="1148.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="681.5" y="1168.3154">payment_system</text><rect fill="#00FFFF" filter="url(#fa2f981eyb554)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="917.5" y="81.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="924.5" y="101.292">issuer_bank</text><rect fill="#00FFFF" filter="url(#fa2f981eyb554)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="917.5" y="1148.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="924.5" y="1168.3154">issuer_bank</text><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="664.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="295" y="190.8594"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="891.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="501" y="249.125"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="503.6016" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="737" y="351.6563"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="64.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="737" y="919.5234"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="737" y="1063.0547"/><rect fill="#FFFFFF" filter="url(#fa2f981eyb554)" height="393.0703" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="963" y="462.1875"/><rect fill="#EEEEEE" filter="url(#fa2f981eyb554)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1242" x="3" y="147.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1245" y1="147.1602" y2="147.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1245" y1="150.1602" y2="150.1602"/><rect fill="#EEEEEE" filter="url(#fa2f981eyb554)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="116" x="566" y="136.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="572" y="152.6606">authorization</text><polygon fill="#A80036" points="283,186.8594,293,190.8594,283,194.8594,287,190.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="140" x2="289" y1="190.8594" y2="190.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="147" y="185.7935">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="160" y="185.7935">open internet-shop</text><polygon fill="#A80036" points="283,215.9922,293,219.9922,283,223.9922,287,219.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="140" x2="289" y1="219.9922" y2="219.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="147" y="214.9263">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="160" y="214.9263">press "Pay" button</text><polygon fill="#A80036" points="489,245.125,499,249.125,489,253.125,493,249.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305" x2="495" y1="249.125" y2="249.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="312" y="244.0591">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="325" y="244.0591">redirect to payment-page</text><polygon fill="#A80036" points="151,289.3906,141,293.3906,151,297.3906,147,293.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="145" x2="500" y1="293.3906" y2="293.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="157" y="280.7583">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="170" y="273.1919">show</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="170" y="288.3247">payment-page</text><polygon fill="#A80036" points="489,318.5234,499,322.5234,489,326.5234,493,322.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="140" x2="495" y1="322.5234" y2="322.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="147" y="317.4575">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="160" y="317.4575">payment data input</text><polygon fill="#A80036" points="725,347.6563,735,351.6563,725,355.6563,729,351.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="511" x2="731" y1="351.6563" y2="351.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="518" y="346.5903">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="531" y="346.5903">check card and payment data</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="747" x2="789" y1="395.9219" y2="395.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="789" x2="789" y1="395.9219" y2="408.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="748" x2="789" y1="408.9219" y2="408.9219"/><polygon fill="#A80036" points="758,404.9219,748,408.9219,758,412.9219,754,408.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="754" y="383.2896">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="767" y="375.7231">check</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="767" y="390.856">card data</text><path d="M62,423.9219 L126,423.9219 L126,430.9219 L116,440.9219 L62,440.9219 L62,423.9219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="424.3359" style="stroke: #000000; stroke-width: 2.0;" width="1173" x="62" y="423.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="77" y="436.9888">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="141" y="436.1323">[successful check card data]</text><polygon fill="#A80036" points="951,458.1875,961,462.1875,951,466.1875,955,462.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="747" x2="957" y1="462.1875" y2="462.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="754" y="457.1216">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="767" y="457.1216">check payment data</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="973" x2="1015" y1="491.3203" y2="491.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1015" x2="1015" y1="491.3203" y2="504.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="974" x2="1015" y1="504.3203" y2="504.3203"/><polygon fill="#A80036" points="984,500.3203,974,504.3203,984,508.3203,980,504.3203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="980" y="486.2544">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="993" y="486.2544">check payment data</text><path d="M72,519.3203 L136,519.3203 L136,526.3203 L126,536.3203 L72,536.3203 L72,519.3203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="248.8672" style="stroke: #000000; stroke-width: 2.0;" width="1153" x="72" y="519.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="87" y="532.3872">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="151" y="531.5308">[successful check payment data]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="973" x2="1015" y1="557.5859" y2="557.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1015" x2="1015" y1="557.5859" y2="570.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="974" x2="1015" y1="570.5859" y2="570.5859"/><polygon fill="#A80036" points="984,566.5859,974,570.5859,984,574.5859,980,570.5859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="980" y="552.52">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="1002" y="552.52">hold money of client for payment</text><polygon fill="#A80036" points="758,595.7188,748,599.7188,758,603.7188,754,599.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="752" x2="962" y1="599.7188" y2="599.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="764" y="594.6528">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="786" y="594.6528">the payment is successful</text><polygon fill="#A80036" points="522,624.8516,512,628.8516,522,632.8516,518,628.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="516" x2="736" y1="628.8516" y2="628.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="528" y="623.7856">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="550" y="623.7856">the payment is successful</text><polygon fill="#A80036" points="151,653.9844,141,657.9844,151,661.9844,147,657.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="145" x2="500" y1="657.9844" y2="657.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="157" y="652.9185">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="179" y="652.9185">the payment is successful</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="72" x2="1225" y1="666.9844" y2="666.9844"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="262" x="77" y="677.1948">[some failure when check payment data]</text><polygon fill="#A80036" points="758,697.9219,748,701.9219,758,705.9219,754,701.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="752" x2="962" y1="701.9219" y2="701.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="764" y="696.856">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="786" y="696.856">payment is failed</text><polygon fill="#A80036" points="522,727.0547,512,731.0547,522,735.0547,518,731.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="516" x2="736" y1="731.0547" y2="731.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="528" y="725.9888">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="550" y="725.9888">payment is failed</text><polygon fill="#A80036" points="151,756.1875,141,760.1875,151,764.1875,147,760.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="145" x2="500" y1="760.1875" y2="760.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="157" y="755.1216">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="179" y="755.1216">payment is failed</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="62" x2="1235" y1="776.1875" y2="776.1875"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="235" x="67" y="786.3979">[some failure when check card data]</text><polygon fill="#A80036" points="316,807.125,306,811.125,316,815.125,312,811.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="310" x2="736" y1="811.125" y2="811.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="322" y="806.0591">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="344" y="806.0591">error message</text><polygon fill="#A80036" points="151,836.2578,141,840.2578,151,844.2578,147,840.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="145" x2="294" y1="840.2578" y2="840.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="157" y="835.1919">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="179" y="835.1919">payment deny</text><rect fill="#EEEEEE" filter="url(#fa2f981eyb554)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1242" x="3" y="875.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1245" y1="875.8242" y2="875.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1245" y1="878.8242" y2="878.8242"/><rect fill="#EEEEEE" filter="url(#fa2f981eyb554)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="78" x="585" y="865.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="591" y="881.3247">clearing</text><polygon fill="#A80036" points="725,915.5234,735,919.5234,725,923.5234,729,919.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="511" x2="731" y1="919.5234" y2="919.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="518" y="914.4575">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="540" y="914.4575">send purchase information</text><polygon fill="#A80036" points="956,944.6563,966,948.6563,956,952.6563,960,948.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="747" x2="962" y1="948.6563" y2="948.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="754" y="943.5903">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="776" y="943.5903">send purchase information</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="747" x2="789" y1="982.7891" y2="982.7891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="789" x2="789" y1="982.7891" y2="995.7891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="742" x2="789" y1="995.7891" y2="995.7891"/><polygon fill="#A80036" points="752,991.7891,742,995.7891,752,999.7891,748,995.7891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="754" y="977.7231">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="776" y="977.7231">reconciliation</text><rect fill="#EEEEEE" filter="url(#fa2f981eyb554)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1242" x="3" y="1019.3555"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1245" y1="1019.3555" y2="1019.3555"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1245" y1="1022.3555" y2="1022.3555"/><rect fill="#EEEEEE" filter="url(#fa2f981eyb554)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="99" x="574.5" y="1008.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="580.5" y="1024.856">settlement</text><polygon fill="#A80036" points="758,1059.0547,748,1063.0547,758,1067.0547,754,1063.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="752" x2="967" y1="1063.0547" y2="1063.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="764" y="1057.9888">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="786" y="1057.9888">send payment after clearing</text><polygon fill="#A80036" points="522,1088.1875,512,1092.1875,522,1096.1875,518,1092.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="741" y1="1092.1875" y2="1092.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="528" y="1087.1216">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="550" y="1087.1216">send payment after clearing</text><path d="M8,1105.1875 L8,1130.1875 L131,1130.1875 L131,1115.1875 L121,1105.1875 L8,1105.1875 " fill="#00FFFF" filter="url(#fa2f981eyb554)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M121,1105.1875 L121,1115.1875 L131,1115.1875 L121,1105.1875 " fill="#00FFFF" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="14" y="1122.2544">by oko-ek, 2019</text><!--MD5=[08c89556c6e611317f0f7f247ef85df3]
@startuml
actor client_customer as client_customer #ffff00 
participant internet_shop as internet_shop #99ff99
participant bank_acquirer as bank_acquirer #ff0000
participant payment_system as payment_system #ff00ff
participant issuer_bank as issuer_bank #00ffff

autonumber
title card payment processing

== authorization ==

client_customer -> internet_shop: open internet-shop
activate internet_shop
client_customer -> internet_shop: press "Pay" button
internet_shop -> bank_acquirer : redirect to payment-page
activate bank_acquirer
client_customer <- - bank_acquirer: show \npayment-page
client_customer -> bank_acquirer: payment data input
bank_acquirer -> payment_system: check card and payment data
activate payment_system
payment_system -> payment_system: check \ncard data

alt successful check card data

	payment_system -> issuer_bank: check payment data
	activate issuer_bank
	issuer_bank -> issuer_bank: check payment data

	alt successful check payment data 

		issuer_bank -> issuer_bank: hold money of client for payment
		payment_system <- - issuer_bank: the payment is successful
		bank_acquirer <- - payment_system: the payment is successful
		client_customer <- - bank_acquirer: the payment is successful

	else some failure when check payment data 

		payment_system <- - issuer_bank: payment is failed
		bank_acquirer <- - payment_system: payment is failed
		client_customer <- - bank_acquirer: payment is failed

	end 

else some failure when check card data 
	
	internet_shop <- - payment_system: error message
	client_customer <- - internet_shop: payment deny

end 

deactivate issuer_bank
deactivate payment_system
deactivate internet_shop

== clearing ==

bank_acquirer -> payment_system: send purchase information
activate payment_system
payment_system -> issuer_bank: send purchase information
payment_system -> payment_system: reconciliation
deactivate payment_system

== settlement ==

payment_system <- issuer_bank: send payment after clearing
activate payment_system
bank_acquirer <- payment_system: send payment after clearing
deactivate payment_system

note left of client_customer #aqua
	by oko-ek, 2019
end note
@enduml

PlantUML version 1.2019.13(Tue Dec 10 17:18:29 UTC 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>